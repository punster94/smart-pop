<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <selection>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
      </br>
    </selection>
  </aside>
</div>
<table id='courseList' class="display compact">
  <thead>
    <tr>
      <td><b>Course Name</b></td>
      <td><b>Course Number</b></td>
      <td><b>Section Number</b></td>
    </tr>
  </thead>
</table>

<%= javascript_tag do %>
  $(document).ready( function () {
    $('#courseList').DataTable({
data: <%= @user.account.courses.select("course_name, course_number, section_number, courses.id").to_json.html_safe %>,
        columns: [{data: 'course_name'}, {data: 'course_number'}, {data: 'section_number'}],
        fnRowCallback: function( nRow, aData, iDisplayIndex ) {
          console.log(aData);
          $('td:eq(0)', nRow).html('<a href="/courses/' + aData.id + '">' + aData.course_name + '</a>');
          return nRow;
        }
      });
    });
<% end %>
<% if @user.account.class == Teacher %>
  <%= link_to "Create New Course", newcourse_path, class: "btn btn-large btn-primary" %>
<% end %>