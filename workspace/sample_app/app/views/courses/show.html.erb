<% provide(:title, "Quiz List") %>
<% if current_user.id == @course.teacher.user.id %>
  <%= link_to "Edit Course", "/courses/#{@course.id}/edit", class: "btn btn-large float-right" %>
  <%= link_to "Add Quiz", "/quizzes/new/#{@course.id}", class: "btn btn-large btn-success" %>
<% end %>
<h1>Quiz List</h1>
<table id='quizList' class="display compact">
  <thead>
    <tr>
      <td><b>Title</b></td>
      <td><b>Start Time</b></td>
      <td><b>End Time</b></td>
    </tr>
  </thead>
</table>

<%= javascript_tag do %>
  $(document).ready( function () {
    $('#quizList').DataTable({
      data: <%= @course.quizzes.select("title, start_time, end_time, course_id, quizzes.id").to_json.html_safe %>,
      columns: [{data: 'title'}, {data: 'start_time'}, {data: 'end_time'}],
      fnRowCallback: function( nRow, aData, iDisplayIndex ) {
        $('td:eq(0)', nRow).html('<a href="/quizzes/' + aData.id + '/edit">' + aData.title + '</a>');
      }
    });
  });
<% end %>
